<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[springbootæ•´åˆkafka]]></title>
    <url>%2F2017%2F10%2F26%2F2017-05-31-springboot-kafka%2F</url>
    <content type="text"><![CDATA[kafkaç™¾ç§‘:Kafkaæ˜¯ä¸€ç§é«˜åžåé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å¤„ç†æ¶ˆè´¹è€…è§„æ¨¡çš„ç½‘ç«™ä¸­çš„æ‰€æœ‰åŠ¨ä½œæµæ•°æ®ã€‚ è¿™ç§åŠ¨ä½œï¼ˆç½‘é¡µæµè§ˆï¼Œæœç´¢å’Œå…¶ä»–ç”¨æˆ·çš„è¡ŒåŠ¨ï¼‰æ˜¯åœ¨çŽ°ä»£ç½‘ç»œä¸Šçš„è®¸å¤šç¤¾ä¼šåŠŸèƒ½çš„ä¸€ä¸ªå…³é”®å› ç´ ã€‚ è¿™äº›æ•°æ®é€šå¸¸æ˜¯ç”±äºŽåžåé‡çš„è¦æ±‚è€Œé€šè¿‡å¤„ç†æ—¥å¿—å’Œæ—¥å¿—èšåˆæ¥è§£å†³ã€‚ å¯¹äºŽåƒHadoopçš„ä¸€æ ·çš„æ—¥å¿—æ•°æ®å’Œç¦»çº¿åˆ†æžç³»ç»Ÿï¼Œä½†åˆè¦æ±‚å®žæ—¶å¤„ç†çš„é™åˆ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚Kafkaçš„ç›®çš„æ˜¯é€šè¿‡Hadoopçš„å¹¶è¡ŒåŠ è½½æœºåˆ¶æ¥ç»Ÿä¸€çº¿ä¸Šå’Œç¦»çº¿çš„æ¶ˆæ¯å¤„ç†ï¼Œä¹Ÿæ˜¯ä¸ºäº†é€šè¿‡é›†ç¾¤æ¥æä¾›å®žæ—¶çš„æ¶ˆè´¹ã€‚ mac ä½¿ç”¨brewå®‰è£…kafka12cd /usr/localbrew install kafka å› ä¸ºkafkaæ˜¯ä¾èµ–zookeeperçš„,æ‰€ä»¥ä½¿ç”¨brewå®‰è£…kafkaçš„åŒæ—¶ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å®‰è£…zookeeper. ä¸‹é¢æ˜¯æˆ‘ä»¬ä½¿ç”¨å‘½ä»¤åˆ†åˆ«å¼€å¯zookeeperå’Œkafka,ç„¶åŽè¿è¡Œkafkaç¨‹åºé‡Œé¢çš„bashè„šæœ¬æ¥å¯åŠ¨ä¸€ä¸ªç”Ÿäº§è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…. ç”±äºŽæˆ‘ä»¬ä½¿ç”¨brewå®‰è£…çš„kafka,æ‰€ä»¥çœåŽ»äº†é…ç½®çŽ¯å¢ƒå˜é‡è¿™ä¸€æ­¥äº†. 1234567891011zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties &amp;#å¯åŠ¨zookeeperå‘½ä»¤,kafkaä¾èµ–zookeeperkafka-server-start /usr/local/etc/kafka/server.properties &amp;#å¯åŠ¨kafkaå‘½ä»¤kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test#åˆ›å»ºä¸€ä¸ªtopicåä¸ºâ€testâ€kafka-topics --list --zookeeper localhost:2181#æŸ¥çœ‹å·²ç»åˆ›å»ºçš„topicsåˆ—è¡¨kafka-console-producer.sh --broker-list localhost:9092 --topic test kafka-console-consumer --bootstrap-server localhost:9092 --topic test --from-beginning #ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤åˆ†åˆ«å¼€å¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…,å½“æˆ‘ä»¬åœ¨æ¶ˆè´¹è€…ç»ˆç«¯è¾“å…¥æ¶ˆæ¯,ç”Ÿäº§è€…å½“ä¸­å°±ä¼šè¿›è¡Œæ¶ˆè´¹ springbootæ•´åˆkafkapomæ·»åŠ ä¾èµ–:123456789&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt; &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt; &lt;/dependency&gt; é…ç½®æ–‡ä»¶:12345678910spring:kafka: bootstrap-servers: localhost:9092 consumer: group-id: myGroup key-deserializer: org.apache.kafka.common.serialization.StringDeserializer value-deserializer: org.apache.kafka.common.serialization.StringDeserializer producer: key-serializer: org.apache.kafka.common.serialization.StringSerializer value-serializer: org.apache.kafka.common.serialization.StringSerializer ç”Ÿäº§è€…:1234567891011121314@Componentpublic class Sender &#123; @Autowired private KafkaTemplate kafkaTemplate; private Gson gson = new GsonBuilder().create(); public void senMessage()&#123; Message m = new Message(); m.setId(System.currentTimeMillis()); m.setMsg(UUID.randomUUID().toString()); m.setSendTime(new Date()); kafkaTemplate.send("test",gson.toJson(m)); &#125;&#125; æ¶ˆè´¹è€…:12345678910111213@Componentpublic class Receiver &#123; private final static Logger logger = LoggerFactory.getLogger(Receiver.class); private Gson gson = new GsonBuilder().create(); @KafkaListener(topics = "test") public void processMessage(String content)&#123; Message m = gson.fromJson(content,Message.class); logger.info("æ¶ˆæ¯å‘é€è€…å‘é€çš„ä¿¡æ¯ m=&#123;&#125;",m); &#125;&#125; springboot å¯åŠ¨å…¥å£:12345678910111213@SpringBootApplicationpublic class KafkaApplication &#123; public static void main(String[] args) throws InterruptedException &#123; ApplicationContext app = SpringApplication.run(KafkaApplication.class, args); while(true)&#123; Sender sender = app.getBean(Sender.class); sender.senMessage(); Thread.sleep(500); &#125; &#125;&#125; å‚è€ƒæ–‡æ¡£åŠæºä»£ç ä¿®æ”¹è¿‡åŽçš„ðŸŒ°githubåŽŸæ¥çš„ðŸŒ°csdn]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>kafka</tag>
      </tags>
  </entry>
</search>
